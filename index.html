<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>Vue.js - expériences</title>

        <meta name="description" content="Vue.js - expériences">
        <meta name="author" content="Fabien ANTOINE">

        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/white.css" id="theme">

        <!-- Theme used for syntax highlighting of code -->
        <link rel="stylesheet" href="lib/css/zenburn.css">

        <!-- Printing and PDF exports -->
        <script>
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
            document.getElementsByTagName( 'head' )[0].appendChild( link );
        </script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="reveal">

            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">
                <section data-background="img/background-MI-vue.svg" data-markdown>
                    <textarea data-template>
                    # Vue.js
                    ### développements progressifs

                    Fabien Antoine<br>
                    data scientist
                    </textarea>
                </section>

                <section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            ## missions du MI

                            - relation **état/collectivités** : intégrité des institutions, libertés locales
                            - **sécurité des citoyens et des biens** : libertés publiques (suffrages), risques et fléaux (sécurité intérieure, sécurité civile, sécurité routière ...)
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            ## (data-)lab au MI

                            - accélération d'usage innovants (idéation, hackathons, POCs, ...)
                            - évangélisation tech (opendata, API, dataviz, datascience, ...)

                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                          ## accompagnement projets innovants

                          - EIGs (cartAV, matchID, previsecours, puis IA Flash)
                          - Start'up (Histovec, Polex)
                          - FTAP (l'entrepôt, puis CTFIA)
                        </textarea>
                    </section>
                </section>

                <section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            ## APIful & front au MI
                            - premier pas 2014 (SI Asile : Angular 1/Python 2)
                            - plus de 50% des nouveaux projets utilisent des techno front : Angular 2 (Si Accident), React (Contrôle Frontière)
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            #### accélérer les itérations alpha/bêta
                            - mock-up JQuery
                            - alpha/bêta: backend-less Vue/React, nginx, elasticsearch, docker
                            - ajout progressif de backend (python, node)
                          </textarea>
                      </section>
                      <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>

                            #### Travaux
                            - cartAV: mock-up leafleat/jquery puis POC Vue
                            - matchID (validation) : mock-up DSS/Jquery puis POC vue puis appli Vue/python
                            - previsecours: mock-up DSS/Jquery, puis POC Vue (en cours)
                            - histovec: mock-up Bootstrap, puis POC Vue.js

                        </textarea>
                    </section>
                </section>
                <section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            Cas d'usage n°1 <br/>
                            <img width="600" src="img/cartav.svg"><br/>
                            **géodécisionnel**<br/>
                            <small>
                             croiser les données d’accidentalité avec les données de verbalisation <br>pour réaliser un outil de cartographie décisionnelle
                            </small>
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                             <img width="300" data-src="img/eig_logo.png" alt="EIG logo">
                            <br/><small>défi 2017</small>
                            <iframe frameborder="0" width="800" height="448" src="https://www.dailymotion.com/embed/video/x5ciq09" allowfullscreen allow="autoplay"></iframe>
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            <img width="300" data-src="img/eig_logo.png" alt="EIG logo">
                            #### défi 2017

                            **croiser** les données d’accidentalité avec les données de verbalisation pour réaliser un outil de **cartographie** décisionnelle
                            <br/>
                            <br/>
                            <small>
                            accidents et verbalisation à **enrichir géographiquement** <small> (géocodage d'adresses, projection sur les routes)</small>
                            <br/>
                            <br/>
                            pour permettre aux forces de polices de **mieux orienter les verbalisations** vis à vis des accidents

                            </small>
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            #### réponse au défi
                            #### avec Dataiku/DSS, Vue.JS/Elasticsearch

                            <small>
                            - DSS: géocodage avancé, injection Elasticsearch
                            - Vue.js + leaflet : présentation des données

                            </small>
                            <img height=300 src="img/workflow-cartav.jpeg"/>
                            <br/>

                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            <img height="30" src="img/cartav.svg"><br/>

                            <iframe width="854" height="480" src="https://www.youtube.com/embed/YXdVgf2px_I" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
                            <smal><small>réalisé avec Vue.js</small></smal>

                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            Usage de Vue.js
                            <small>
                            - router/Vuex : synchronisation paramètrage des filtres / url
                            - limites - intégration Leaflet: via Vuex, couplage lâche (zoom)
                            - création d'un composant de géocodage leaflet : leaflet-geocoder-ban
                            - aujourd'hui: vue2-leaflet (KoRiGaN)? à voir

                            </small>

                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            ### Timing
                            - juillet 2016: faisabilité (mock-up JQuery-leaflet 2 niveau geo) - 2 semaines
                            - EIG (début 2017) première maquette Vue en 1 mois (4 niveaux, 2 jeux de données, polylines)
                            - première expérimentation du prototype en 10 mois
                            - généralisation en cours (12 mois)

                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            ### Bénéfices avec Vue.js

                              - gestion de niveaux géographiques multiples
                              - réactivité des filtres
                              - courbe d'apprentissage (les 2 EIG débutaient en Vue, pas en Leaflet)
                              - simplicité/rigueur (une vue, un composant, un fichier)

                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            ### Références
                            <img height="30" src="img/cartav.svg"><br/>
                            <small>
                              - [CartAV sur GitHub](https://github.com/entrepreneur-interet-general/cartav)
                              - [Géocodage BAN/Leaflet : package npm](https://www.npmjs.com/package/leaflet-geocoder-ban)
                              - [ParcEpic, Francis Chabouis](https://medium.com/cr%C3%A9ation-dune-app-cartographique-avec-firebase-vue/cr%C3%A9ation-dune-app-cartographique-avec-firebase-vue-js-et-leaflet-868e9ea1b958)
                              - [Korigan, composant Vue+leaflet / à tester](https://github.com/KoRiGaN/Vue2Leaflet)

                            </small>

                        </textarea>
                    </section>
                </section>
                <section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            Cas d'usage n°2 <br/>
                            <img width="600" src="img/matchID-logo.svg"><br/>
                            **outil de dataprep/datascience pour fuzzy matching**<br/>
                            <small>
                            réconciliation d'états civils dans les bases étatiques
                            </small>
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                             <img width="300" data-src="img/eig_logo.png" alt="EIG logo">
                            <br/><small>défi 2017</small>
                            <br/>
                            <iframe frameborder="0" width="800" height="448" src="https://www.dailymotion.com/embed/video/x5ciua7" allowfullscreen allow="autoplay"></iframe>
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            <img width="300" data-src="img/eig_logo.png" alt="EIG logo">
                            #### défi 2017

                            le système des permis de conduire SNPC n’invalidait pas les permis des conducteurs après leur décès
                            <small>
                            - Quelle est la part de décédés au SNPC ?
                            - Quelle est la quantité de retraits de points attribués à des personnes décédées ?
                            - Y’a-t-il des délivrances de permis de conduire à des personnes décédées ?

                            **Bonus** : Existe-t-il des personnes possédant plusieurs permis ?
                            </small>
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            #### réponse au défi

                            <small>
                            - préparer et redresser la donnée INSEE (22M) et SNPC (56M)
                            - croiser les bases de données avec des techniques de matching flou
                            - attribuer un score de confiance à chaque réconciliation d’identités
                            - itérer avec de l’apprentissage automatique

                            </small>
                          </textarea>
                        </section>
                        <section data-background="img/background-MI-vue.svg" data-markdown>
                            <textarea data-template>
                                <img height=500 src="img/workflow-matchID.png"/>
                            </textarea>
                        </section>
                        <section data-background="img/background-MI-vue.svg" data-markdown>
                            <textarea data-template>
                                ### Résultats

                                - 30% de correspondances strictes
                                - 66% avec normalisation simple <small>(trait d'union, un seul prénom)</small>
                                - 95% avec matchID (point d'équilibre rappel/précision)

                            </textarea>
                        </section>
                        <section data-background="img/background-MI-vue.svg" data-markdown>
                          <textarea data-template>
                              #### Comment

                              - Résultats initiaux avec Dataiku/DSS + Elasticsearch
                              - "Libération" du code: création de [matchID](https://matchid-project.github.io/) : Vue.js/Python-Pandas/Elasticsearch

                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                          #### matchID: la validation (ML)
                            <img src="img/matchid-frontend-validation.png"><br/>
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                          #### matchID: la validation (ML)
                            - POC DSS/jquery/Elasticsearch (slick-grid.js)
                            - composant Vue.js autonome (+elasticsearch)
                            - Puis développement du dataprep matchID (backend+front) / intégration de la validation
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            - limites: pas de vue-datatable acceptable
                            - avantage: customisation progressive facile (template)
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                          #### matchID: dataprep (codeMirror + custom table)
                            <img src="img/matchid-dataprep.png"><br/>
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                          #### matchID: dataprep (codeMirror + custom table)
                            - codeMirror: composant vue, intégration custom de certains plugins
                            - datatable : custom nécessaire (contenus et colonnes filtrés par regex)
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                          #### matchID: graphe des recettes (D3 + custom)
                            <img src="img/matchid-graphe.png"><br/>
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                          #### matchID: graphe des recettes (D3 + custom)
                            - D3 : uniquement pour la structure graphe
                            - vue très puissant pour le render svg (0% D3.js)
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                          #### matchID: graphiques de résultats (chart.js + custom)
                          <img src="img/matchid-chart.png"><br/>
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                          #### matchID: graphiques de résultats (chart.js + custom)
                            - chart.js: facile à intégrer (plus complexe = css)
                            - vue: nourrissement des données
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                          #### matchID: streaming de logs (API sse + custom)
                          <img src="img/matchid-logs.png"><br/>
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                          #### matchID: streaming (server stream event)
                            - en Flask : court-circuit de FlaskRestPlus (bien formatter le SSE)
                            - Vue: utilisation des classes natives JS: EventSource / addEventListener
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            ### Bénéfices avec Vue.js
                              - réactivité (y/c sans Vuex : uniquement messages parents/enfants + bus)
                              - réaliser en apprenant
                              - progressivité: maquettage/intégration/durcissement (refactos progressifs, y/c avec l'API)
                        </textarea>
                    </section>
                </section>

                <section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            Cas d'usage n°3 <br/>
                            <img width="200" src="img/histovec_square.png"><br/>
                            ** RGPD & backend-less **<br/>
                            <small>
                              achetez en confiance un véhicule d'occasion
                            </small>
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            ## véhicules d'occasion: des acheteurs abusés

                            - vices cachés
                            - réparations coûteuses
                            - véhicules non assurables
                            - 47 % de fraude dans les transactions de véhicules d’occasion – source DGCCRF, 2015
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            ## méthode start'up
                            - challenge hackathon: idéation et mock-up bootstrap (déc 2017)
                            - équipe : mars 2017
                            - choix tech: Github+Vue.js+Elasticsearch (chiffrement AES256)
                            - réalisation / homologation RGPD et mise en prod 2,5 mois
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            ## bénéfices Vue.js
                            - progressivité: facilité d'accès aux dev (initialement php)
                            - implication du designer (itérativité)
                            - intégration progressive (boostrap "standalone" => npm)
                        </textarea>
                    </section>
                </section>

                <section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            Cas d'usage n°4 <br/>
                            <img width="200" src="img/previsecours_logo.png"><br/>
                            **opendata et machine learning**<br/>
                            <small>
                            aider les sapeurs-pompiers à intervenir plus<br> efficacement avec des modèles prédictifs
                            </small>
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                             <img width="300" data-src="img/eig_logo.png" alt="EIG logo">
                            <br/><small>défi 2018</small>
                            <iframe frameborder="0" width="800" height="448" src="https://www.dailymotion.com/embed/video/x6fp47d" allowfullscreen allow="autoplay"></iframe>
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            <img width="300" data-src="img/eig_logo.png" alt="EIG logo">
                            #### défi 2018
                            aider les sapeurs-pompiers à intervenir plus efficacement avec des modèles prédictifs
                            <small>
                            - modèle sur les volumes d’interventions et leurs géolocalisations pour anticiper les moyens à mobiliser
                            - en partenariat avec les sapeurs-pompiers de l’Essonne
                            - focus sur le secours aux personnes, puis les départs d'incendie

                            </small>
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            **REPONSE AU DÉFI**
                            <small>
                            - données opendata :
                            <small>INSEE population, ménages, scolarisation, IDH2, pollens, pollution, transports, calendrier, météo </small>
                            - données d'intervention : ~ 90k / an
                            - featuring et modélisation avec **Dataiku**
                            - POC/webapp avec **Dataiku** puis Vue.js

                            </small>
                            <img height=180 src="img/interventions.png"/>
                            <img height=180 src="img/opendata.png"/>
                            <img height=180 src="img/featuring.png"/>
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            le workflow de prévisecours
                            <img height=500 src="img/workflow-previsecours.png"/>
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            ### Résultats en 1 mois

                            - ROC AUC: 0.918 sans tweaking
                            - POC visualisation

                            <img height=250 src="img/mling.png"/>
                            <img height=250 =200 src="img/map.png"/>

                            [https://previsecours.fr](https://previsecours.fr)


                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            ### POC
                            #### évolution des interventions par commune

                            <iframe id="freshwidget-frame" src="https://algo.previsecours.fr/dip/api/webapps/view?projectKey=PRVISECOURSVISUALISATION&webAppId=W0kS5vF&apiKey=932QkDr6PUcppTtKPUfoDWlOM8BHhSz6" scrolling="auto" allowtransparency="true" style="height: 500px; width: 100%;" frameborder="0"> </div></iframe>


                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            ### Bénéfices avec Dataiku

                            <small>
                            - accélérer l'exploitation de l'opendata
                            - tester l'impact des variables avec le machine learning
                            - expérimenter l'usage prévisions avec les web app

                            </small>

                            pour le métier du secours
                            <small>
                            - premiers résultats en 1 mois
                            - accès aux résultats en direct

                            </small>
                        </textarea>
                    </section>
                </section>

                <section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            ### Résultats avec Vue.js
                            #### au ministère de l'Intérieur

                            <small>
                            - cartAV: géodécisionnel accidents/verbalisation
                            - matchID: outil de réconciliation d'identités avec machine learning
                            - histovec: ouverture sécurisée des données du véhicule
                            - previsecours: prédictif interventions pompiers

                            </small>
                            avec :
                            <small>
                              - maquette amont (qq jours)
                              - v0 en 1 mois (backend-less)
                              - développeurs non initiés à Vue en amont

                            </small>
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            ### Bénéfices avec Vue.js

                            <small>
                              - progressivité
                              - customisation
                              - réactivité (bus, store, ...)
                              - support communautaire
                            </small>

                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            ### Points d'attention
                            <small>
                              - composants design (préférer bulma/bootstrap 4 à 3) : formulaire, accordéons, ...
                              - niveau d'intégration js - leaflet, codemirror, datatable (inopportun)
                            </small>
                        </textarea>
                    </section>
                    <section data-background="img/background-MI-vue.svg" data-markdown>
                        <textarea data-template>
                            ### Questions et contact

                            [https://github.com/rhanka/vue-lll-2018](https://github.com/rhanka/)

                            [fabien.antoine@m4x.org](mailto:fabien.antoine@m4x.org)

                        </textarea>
                    </section>
                </section>


            </div>

        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>

        <script>

            // More info https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,

                transition: 'slide', // none/fade/slide/convex/concave/zoom

                // More info https://github.com/hakimel/reveal.js#dependencies
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/search/search.js', async: true },
                    { src: 'plugin/zoom-js/zoom.js', async: true },
                    { src: 'plugin/notes/notes.js', async: true }
                ]
            });

        </script>

    </body>
</html>
